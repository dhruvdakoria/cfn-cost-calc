{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Sample CloudFormation stack for cost estimation testing",
  "Resources": {
    "WebServer": {
      "Type": "AWS::EC2::Instance",
      "Properties": {
        "InstanceType": "t3.medium",
        "ImageId": "ami-12345678"
      }
    },
    "WebServerVolume": {
      "Type": "AWS::EC2::Volume",
      "Properties": {
        "AvailabilityZone": "us-east-1a",
        "Size": 100,
        "VolumeType": "gp3"
      }
    },
    "Database": {
      "Type": "AWS::RDS::DBInstance",
      "Properties": {
        "DBInstanceClass": "db.t3.medium",
        "Engine": "postgres",
        "AllocatedStorage": 50,
        "MultiAZ": true
      }
    },
    "CacheCluster": {
      "Type": "AWS::ElastiCache::CacheCluster",
      "Properties": {
        "CacheNodeType": "cache.t3.small",
        "Engine": "redis",
        "NumCacheNodes": 2
      }
    },
    "LoadBalancer": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Type": "application",
        "Scheme": "internet-facing"
      }
    },
    "NatGateway": {
      "Type": "AWS::EC2::NatGateway",
      "Properties": {
        "AllocationId": "eipalloc-12345678",
        "SubnetId": "subnet-12345678"
      }
    },
    "ApiFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "FunctionName": "ApiHandler",
        "Runtime": "nodejs18.x",
        "Handler": "index.handler",
        "MemorySize": 256,
        "Timeout": 30,
        "Code": {
          "S3Bucket": "my-bucket",
          "S3Key": "code.zip"
        }
      }
    },
    "DataTable": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "TableName": "MyTable",
        "AttributeDefinitions": [
          {
            "AttributeName": "id",
            "AttributeType": "S"
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "id",
            "KeyType": "HASH"
          }
        ],
        "ProvisionedThroughput": {
          "ReadCapacityUnits": 10,
          "WriteCapacityUnits": 5
        }
      }
    },
    "MessageQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "MyQueue"
      }
    },
    "RestApi": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Name": "MyApi"
      }
    },
    "MySecret": {
      "Type": "AWS::SecretsManager::Secret",
      "Properties": {
        "Name": "MyDatabaseSecret"
      }
    },
    "EncryptionKey": {
      "Type": "AWS::KMS::Key",
      "Properties": {
        "Description": "My encryption key"
      }
    },
    "SecurityGroup": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "Web server security group",
        "VpcId": "vpc-12345678"
      }
    },
    "WebServerRole": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": []
        }
      }
    }
  }
}

